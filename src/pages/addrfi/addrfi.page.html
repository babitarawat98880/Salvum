<app-header></app-header>
<ion-content padding has-header>
  <ion-row main-breadcrumb ion-fixed> 
    <ion-col>
      <ol class="breadcrumb">
        <li (click)="root()"><a>Home</a></li>
        <li (click)="goToJobs()"><a>Jobs</a></li>
        <li (click)="backToTradeDash()"><a>{{active_job_breadcrumb}}</a></li> 
        <li (click)="dismiss()"><a>RFIs</a></li> 
        <li class="active">Add RFI</li>
      </ol>
    </ion-col>
  </ion-row>
  <div breadcrumb-height></div>
  <!--ion-row>
  <ion-col col-12-->  
    <ion-list br-lt-grey group-head head-profile>
    <ion-list-header margin0 color="light" no-border br-btm >
      Add Manual RFI
    </ion-list-header> 
    <ion-item>
      <ion-input type="text" label="Question*" labelPlacement="stacked" [(ngModel)] = "question"></ion-input>
    </ion-item>
  
    <ion-item *ngIf="filterTradeId == '0'">
     <ion-label stacked fnt-light fnt-regular>Select Trade*</ion-label>
      <ion-select  cancelText="Cancel" okText="Okay!" [(ngModel)] = "tradeId" (ionChange)="changeTrade(tradeId)">
        <ion-select-option *ngFor="let trade of alltrades" value="{{trade._id}}">
        {{trade.trade_name}} ({{trade.trade_task}})</ion-select-option>   
      </ion-select>
    </ion-item>
  
    <ion-item >
     <ion-label stacked fnt-light fnt-regular>Select User*</ion-label>
      <ion-select  cancelText="Cancel" okText="Okay!" [(ngModel)] = "user_id" >
        <ion-select-option *ngFor="let user of allusers" value="{{user.inviteId}}">
        {{user.email}}</ion-select-option >   
      </ion-select>
    </ion-item>
  
    <ion-row padd-mob-lr15>
      <ion-col size="12" size-md="4">
        <div hidden-xs ng2FileDrop (click) = "uploadFiles()" class="well my-drop-zone">
          <h2><ion-icon name="cloud-upload" color="primary"></ion-icon>Drag & Drop Files To Upload From System</h2>
        </div>
      </ion-col>
      <ion-col size="12" size-md="4">
        <div hidden-xs ng2FileDrop (click)="filemanagerFiles()" class="well my-drop-zone">
          
          <h2><ion-icon name="cloud-upload" color="primary"></ion-icon>Add Files From File Manager</h2>
        </div>
      </ion-col>
      <ion-col size="12" size-md="4">
        <div hidden-xs ng2FileDrop (click)="jobFiles()" class="well my-drop-zone">
          <h2><ion-icon name="cloud-upload" color="primary"></ion-icon>Add Files From Jobs</h2>
        </div>
      </ion-col>
    </ion-row>
  
    <ion-row *ngIf="files !=''">
      <ion-item border-none *ngFor="let file of files; let indx = index ">
      {{file.file_name.search('____') >= 0 ? file.file_name.split('____').pop(-1) : file.file_name.split('_--_').pop(-1)}}
      <button (click) = "removeFile(indx)"><ion-icon name="close"></ion-icon></button>
      </ion-item>
    </ion-row>
  
    <div padding >
      <ion-button color="primary" expand="block"  fnt-regular type="button" (click) = "addManualRfi(question,tradeId,user_id)">Save</ion-button>
    </div>
    </ion-list>
  <!--/ion-col>
  </ion-row-->
  <div footer-height></div>
  </ion-content>
  